/*!
 * dtGrid v1.1.9
 *
 * includes: jquery, bootstrap, fontawesome, My97 DatePicker
 * Copyright 2015, http://www.dtgrid.com, http://www.dlshouwen.com
 */
(function(n){n.fn.DtGrid={init:function(t){for(var i=0;i<t.columns.length;i++)t.columns[i]=n.extend({},n.fn.DtGrid.defaultOptions.column,t.columns[i]);return t=n.extend({},n.fn.DtGrid.defaultOptions.grid,t),t.id||(t.id=n.fn.DtGrid.tools.guid()),n.fn.DtGrid.lang[t.lang]||(t.lang="en"),{init:{toolsIsInit:!1,printWindowIsInit:!1,exportWindowIsInit:{},fastQueryWindowIsInit:!1,advanceQueryWindowIsInit:!1},pager:{pageSize:0,startRecord:0,nowPage:0,recordCount:0,pageCount:0},option:t,originalDatas:null,baseDatas:null,exhibitDatas:null,sortParameter:{columnId:"",sortType:0},sortOriginalDatas:null,parameters:null,fastQueryParameters:null,fastQueryOriginalDatas:null,advanceQueryParameter:{advanceQueryConditions:null,advanceQuerySorts:null},printColumns:null,exportColumns:null,exportDatas:null,load:function(){var t=this,r,i,u;if(t.showProcessBar(),t.init.toolsIsInit==!1)if(t.init.toolsIsInit=!0,t.constructGridToolBar(),t.pager.pageSize=t.option.pageSize,t.pager.startRecord=0,t.pager.nowPage=1,t.option.ajaxLoad){if(t.option.loadAll){r=t.option.loadURL;n.ajax({type:"post",url:r,data:null,contentType:"application/x-www-form-urlencoded; charset=utf-8",beforeSend:function(n){n.setRequestHeader("__REQUEST_TYPE","AJAX_REQUEST")},success:function(i){t.hideProcessBar(function(){t.originalDatas=n.parseJSON(i);t.originalDatas=t.originalDatas?t.originalDatas:[];t.baseDatas=t.originalDatas.slice(0,t.originalDatas.length);t.pager.recordCount=t.baseDatas.length;t.pager.pageCount=Math.floor((t.pager.recordCount-1)/t.pager.pageSize)+1;t.exhibitDatas=t.baseDatas.slice(t.pager.startRecord,t.pager.startRecord+t.pager.pageSize);t.sortOriginalDatas=t.exhibitDatas.slice(0,t.exhibitDatas.length);t.constructGrid();t.constructGridPageBar()})},error:function(){t.hideProcessBar(function(){n.fn.DtGrid.tools.toast(n.fn.DtGrid.lang[t.option.lang].errors.ajaxLoadError,"error",5e3);t.constructGrid();t.constructGridPageBar()})}});return}}else{t.hideProcessBar(function(){t.originalDatas=t.option.datas;t.originalDatas=t.originalDatas?t.originalDatas:[];t.baseDatas=t.originalDatas.slice(0,t.originalDatas.length);t.pager.recordCount=t.baseDatas.length;t.pager.pageCount=Math.floor((t.pager.recordCount-1)/t.pager.pageSize)+1;t.exhibitDatas=t.baseDatas.slice(t.pager.startRecord,t.pager.startRecord+t.pager.pageSize);t.sortOriginalDatas=t.exhibitDatas.slice(0,t.exhibitDatas.length);t.constructGrid();t.constructGridPageBar()});return}!t.option.ajaxLoad||t.option.loadAll?t.hideProcessBar(function(){(t.fastQueryParameters||t.advanceQueryParameter)&&(t.baseDatas=t.originalDatas,t.fastQueryParameters&&(t.baseDatas=t.doFaseQueryDatasFilter(t.baseDatas,t.fastQueryParameters)),t.advanceQueryParameter&&(t.baseDatas=t.doAdvanceQueryDatasFilter(t.baseDatas,t.advanceQueryParameter)));t.pager.recordCount=t.baseDatas.length;t.pager.pageCount=t.pager.recordCount==0?0:Math.floor((t.pager.recordCount-1)/t.pager.pageSize)+1;t.pager.nowPage>t.pager.pageCount&&(t.pager.nowPage=t.pager.pageCount,t.pager.startRecord=t.pager.pageSize*(t.pager.nowPage-1));t.pager.startRecord=t.pager.pageSize*(t.pager.nowPage-1);t.baseDatas.length==0&&(t.pager.nowPage=1,t.pager.startRecord=0);t.exhibitDatas=t.baseDatas.slice(t.pager.startRecord,t.pager.startRecord+t.pager.pageSize);t.sortOriginalDatas=t.exhibitDatas.slice(0,t.exhibitDatas.length);t.constructGrid();t.constructGridPageBar()}):(r=t.option.loadURL,i={},i.isExport=!1,i.pageSize=t.pager.pageSize,i.startRecord=t.pager.startRecord,i.nowPage=t.pager.nowPage,i.recordCount=t.pager.recordCount?t.pager.recordCount:-1,i.pageCount=t.pager.pageCount?t.pager.pageCount:-1,i.parameters=t.parameters?t.parameters:{},i.fastQueryParameters=t.fastQueryParameters?t.fastQueryParameters:{},i.advanceQueryConditions=t.advanceQueryParameter&&t.advanceQueryParameter.advanceQueryConditions?t.advanceQueryParameter.advanceQueryConditions:[],i.advanceQuerySorts=t.advanceQueryParameter&&t.advanceQueryParameter.advanceQuerySorts?t.advanceQueryParameter.advanceQuerySorts:[],u={},u.dtGridPager=JSON.stringify(i),n.ajax({type:"post",url:r,data:u,contentType:"application/x-www-form-urlencoded; charset=utf-8",beforeSend:function(n){n.setRequestHeader("__REQUEST_TYPE","AJAX_REQUEST")},success:function(i){if(i=n.parseJSON(i),!i.isSuccess){n.fn.DtGrid.tools.toast(n.fn.DtGrid.lang[t.option.lang].errors.ajaxLoadError,"error",5e3);t.hideProcessBar();return}t.hideProcessBar(function(){t.exhibitDatas=i.exhibitDatas;t.sortOriginalDatas=t.exhibitDatas.slice(0,t.exhibitDatas.length);t.pager.pageSize=i.pageSize;t.pager.startRecord=i.startRecord;t.pager.nowPage=i.nowPage;t.pager.recordCount=i.recordCount;t.pager.pageCount=i.pageCount;t.constructGrid();t.constructGridPageBar()})},error:function(){t.hideProcessBar(function(){n.fn.DtGrid.tools.toast(n.fn.DtGrid.lang[t.option.lang].errors.ajaxLoadError,"error",5e3);t.constructGrid();t.constructGridPageBar()})}}))},constructGrid:function(){var t=this,s=t.getExtraColumnClass(),r="",f,u,e,o,i;if(r+='<table class="dt-grid '+t.option.tableClass+'" id="dt_grid_'+t.option.id+'" style="'+t.option.tableStyle+'">',t.option.showHeader!=!1){for(u=t.option.columns,r+="<thead>",r+='\t<tr class="dt-grid-headers">',r+='\t\t<th class="extra-column '+s+'"><\/th>',t.option.check&&(r+='\t<th class="check-column"><input type="checkbox" id="dt_grid_'+t.option.id+'_check" value="check"><\/th>'),f=0;f<u.length;f++)r+='\t<th columnNo="'+f+'" columnId="'+u[f].id+'" class="dt-grid-header '+t.getColumnClassForHide(u[f])+" "+u[f].headerClass+' can-sort" style="'+u[f].headerStyle+'">',t.sortParameter&&t.sortParameter.columnId&&t.sortParameter.columnId==u[f].id&&(t.sortParameter.sortType=="1"&&(r+='<span class="dt-grid-sort">'+n.fn.DtGrid.lang[t.option.lang].sortColumn.asc+"<\/span>"),t.sortParameter.sortType=="2"&&(r+='<span class="dt-grid-sort dt-grid-sort-desc">'+n.fn.DtGrid.lang[t.option.lang].sortColumn.desc+"<\/span>")),r+="\t\t"+u[f].title,r+="\t<\/th>";r+="\t<\/tr>";r+="<\/thead>"}if(r+="\t<tbody>",t.exhibitDatas!=null)for(t.sortParameter&&t.sortParameter.columnId&&(t.exhibitDatas=t.sortParameter.sortType!=0?t.exhibitDatas.sort(function(n,i){var r=n[t.sortParameter.columnId],u=i[t.sortParameter.columnId];if(r&&u){if(!isNaN(r)&&!isNaN(u)){if(t.sortParameter.sortType==1)return r-u;if(t.sortParameter.sortType==2)return u-r}if(r instanceof Date&&u instanceof Date){if(t.sortParameter.sortType==1)return r.getTime()-u.getTime();if(t.sortParameter.sortType==2)return u.getTime()-r.getTime()}if(t.sortParameter.sortType==1)return r.localeCompare(u);if(t.sortParameter.sortType==2)return u.localeCompare(r)}return 0}):t.sortOriginalDatas.slice(0,t.sortOriginalDatas.length)),f=0;f<t.exhibitDatas.length;f++){for(r+='\t<tr class="dt-grid-row" dataNo="'+f+'">',r+='\t\t<td class="extra-column extra-column-event '+s+'" dataNo="'+f+'">'+n.fn.DtGrid.lang[t.option.lang].extraColumn.open+"<\/td>",t.option.check&&(r+='\t<td class="check-column text-center"><input type="checkbox" dataNo="'+f+'" id="dt_grid_'+t.option.id+"_check_"+f+'" class="dt-grid-check" value="'+f+'"><\/td>'),u=t.option.columns,e=0;e<u.length;e++)r+='\t<td dataNo="'+f+'" columnNo="'+e+'" class="dt-grid-cell '+t.getColumnClassForHide(u[e])+" "+u[e].columnClass+'" style="'+u[e].columnStyle+'">',o=t.exhibitDatas[f][u[e].id],o=o==null?"":o,r+=u[e].resolution?u[e].resolution(o,t.exhibitDatas[f],u[e],t,f,e):t.formatContent(u[e],o),r+="\t<\/td>";for(r+="\t<\/tr>",r+='\t<tr id="dt_grid_'+t.option.id+"_extra_columns_"+f+'" class="dt-grid-extra-columns hidden">',r+='\t\t<td dataNo="'+f+'" colspan="'+(u.length+1+(t.option.check?1:0))+'">',e=0;e<u.length;e++)u[e].extra!=!1&&(r+='\t\t<p dataNo="'+f+'" columnNo="'+e+'" class="dt-grid-cell '+t.getExtraColumnClassForHide(u[e])+'">',r+="\t\t\t"+u[e].title+" : ",o=t.exhibitDatas[f][u[e].id],o=o==null?"":o,r+=u[e].resolution?u[e].resolution(o,t.exhibitDatas[f],u[e],t,f,e):t.formatContent(u[e],o),r+="\t\t<\/p>");r+="\t\t<\/td>";r+="\t<\/tr>"}r+="\t<\/tbody>";r+="<\/table>";n("#dt_grid_"+t.option.id).remove();n("#"+t.option.gridContainer).append(r);i=t.option.id;t.option.onCellClick&&n("#dt_grid_"+i+" .dt-grid-cell").click(function(n){t.bindCellEvent(t.option.onCellClick,this,n)});t.option.onCellDblClick&&n("#dt_grid_"+i+" .dt-grid-cell").dblclick(function(n){t.bindCellEvent(t.option.onCellDblClick,this,n)});t.option.onCellMouseOver&&n("#dt_grid_"+i+" .dt-grid-cell").mouseover(function(n){t.bindCellEvent(t.option.onCellMouseOver,this,n)});t.option.onCellMouseMove&&n("#dt_grid_"+i+" .dt-grid-cell").mousemove(function(n){t.bindCellEvent(t.option.onCellMouseMove,this,n)});t.option.onCellMouseOut&&n("#dt_grid_"+i+" .dt-grid-cell").mouseout(function(n){t.bindCellEvent(t.option.onCellMouseOut,this,n)});t.option.onCellMouseDown&&n("#dt_grid_"+i+" .dt-grid-cell").mousedown(function(n){t.bindCellEvent(t.option.onCellMouseDown,this,n)});t.option.onCellMouseUp&&n("#dt_grid_"+i+" .dt-grid-cell").mouseup(function(n){t.bindCellEvent(t.option.onCellMouseUp,this,n)});t.option.onRowClick&&n("#dt_grid_"+i+" .dt-grid-cell").click(function(n){t.bindRowEvent(t.option.onRowClick,this,n)});t.option.onRowDblClick&&n("#dt_grid_"+i+" .dt-grid-cell").dblclick(function(n){t.bindRowEvent(t.option.onRowDblClick,this,n)});t.option.onRowMouseOver&&n("#dt_grid_"+i+" .dt-grid-cell").mouseover(function(n){t.bindRowEvent(t.option.onRowMouseOver,this,n)});t.option.onRowMouseMove&&n("#dt_grid_"+i+" .dt-grid-cell").mousemove(function(n){t.bindRowEvent(t.option.onRowMouseMove,this,n)});t.option.onRowMouseOut&&n("#dt_grid_"+i+" .dt-grid-cell").mouseout(function(n){t.bindRowEvent(t.option.onRowMouseOut,this,n)});t.option.onRowMouseDown&&n("#dt_grid_"+i+" .dt-grid-cell").mousedown(function(n){t.bindRowEvent(t.option.onRowMouseDown,this,n)});t.option.onRowMouseUp&&n("#dt_grid_"+i+" .dt-grid-cell").mouseup(function(n){t.bindRowEvent(t.option.onRowMouseUp,this,n)});t.option.onHeaderClick&&n("#dt_grid_"+i+" .dt-grid-header").click(function(n){t.bindHeaderEvent(t.option.onHeaderClick,this,n)});t.option.onHeaderMouseOver&&n("#dt_grid_"+i+" .dt-grid-header").mouseover(function(n){t.bindHeaderEvent(t.option.onHeaderMouseOver,this,n)});t.option.onHeaderMouseMove&&n("#dt_grid_"+i+" .dt-grid-header").mousemove(function(n){t.bindHeaderEvent(t.option.onHeaderMouseMove,this,n)});t.option.onHeaderMouseOut&&n("#dt_grid_"+i+" .dt-grid-header").mouseout(function(n){t.bindHeaderEvent(t.option.onHeaderMouseOut,this,n)});t.option.onHeaderMouseDown&&n("#dt_grid_"+i+" .dt-grid-header").mousedown(function(n){t.bindHeaderEvent(t.option.onHeaderMouseDown,this,n)});t.option.onHeaderMouseUp&&n("#dt_grid_"+i+" .dt-grid-header").mouseup(function(n){t.bindHeaderEvent(t.option.onHeaderMouseUp,this,n)});t.option.onGridClick&&n("#dt_grid_"+i).click(function(n){t.bindGridEvent(t.option.onGridClick,n)});t.option.onGridDblClick&&n("#dt_grid_"+i).dblclick(function(n){t.bindGridEvent(t.option.onGridDblClick,n)});t.option.onGridMouseOver&&n("#dt_grid_"+i).mouseover(function(n){t.bindGridEvent(t.option.onGridMouseOver,n)});t.option.onGridMouseMove&&n("#dt_grid_"+i).mousemove(function(n){t.bindGridEvent(t.option.onGridMouseMove,n)});t.option.onGridMouseOut&&n("#dt_grid_"+i).mouseout(function(n){t.bindGridEvent(t.option.onGridMouseOut,n)});t.option.onGridMouseDown&&n("#dt_grid_"+i).mousedown(function(n){t.bindGridEvent(t.option.onGridMouseDown,n)});t.option.onGridMouseUp&&n("#dt_grid_"+i).mouseup(function(n){t.bindGridEvent(t.option.onGridMouseUp,n)});t.option.onGridComplete&&t.bindGridEvent(t.option.onGridComplete);n("#dt_grid_"+i+" .extra-column-event").click(function(r){var u=n(this).attr("dataNo"),f;n("#dt_grid_"+i+"_extra_columns_"+u).hasClass("hidden")?(n("#dt_grid_"+i+"_extra_columns_"+u).removeClass("hidden"),n(this).html(n.fn.DtGrid.lang[t.option.lang].extraColumn.close),t.option.onExtraOpen&&(f=n("#dt_grid_"+i+' tr[dataNo="'+u+'"]'),t.bindExtraEvent(t.option.onExtraOpen,f,r))):(n("#dt_grid_"+i+"_extra_columns_"+u).addClass("hidden"),n(this).html(n.fn.DtGrid.lang[t.option.lang].extraColumn.open),t.option.onExtraClose&&(f=n("#dt_grid_"+i+' tr[dataNo="'+u+'"]'),t.bindExtraEvent(t.option.onExtraClose,f,r)))});n("#dt_grid_"+i+" .can-sort").click(function(){var r=n(this).attr("columnId"),i;t.sortParameter==null&&(t.sortParameter={});t.sortParameter.columnId&&t.sortParameter.columnId==r?(i=t.sortParameter.sortType,i==0?t.sortParameter.sortType=1:i==1?t.sortParameter.sortType=2:i==2&&(t.sortParameter.sortType=0)):(t.sortParameter.columnId=r,t.sortParameter.sortType=1);t.reload()});t.option.onCheck&&n("input[id*=dt_grid_"+i+"_check_]").click(function(n){t.bindCheckEvent(t.option.onCheck,this,n)});t.option.check&&n("#dt_grid_"+i+"_check").click(function(r){n("input[id*=dt_grid_"+i+"_check_]").attr("checked",this.checked);t.option.onCheck&&n("input[id*=dt_grid_"+i+"_check_]").each(function(){t.bindCheckEvent(t.option.onCheck,this,r)})})},bindCellEvent:function(t,i,r){var f=this,h=f.option.id,e=n(i).attr("dataNo"),s=n(i).attr("columnNo"),u=f.option.columns[s],o=f.exhibitDatas[e],c=u.resolution?u.resolution(o[u.id],o,u,f,e,s):f.formatContent(u,o[u.id]);var l=n(i),a=n("#dt_grid_"+h+' tr[dataNo="'+e+'"]'),v=n("#dt_grid_"+h+' .dt-grid-extra-columns>td[dataNo="'+e+'"]');t(c,o,u,f,e,s,l,a,v,r)},bindRowEvent:function(t,i,r){var f=this,h=f.option.id,e=n(i).attr("dataNo"),s=n(i).attr("columnNo"),u=f.option.columns[s],o=f.exhibitDatas[e],c=u.resolution?u.resolution(o[u.id],o,u,f,e,s):f.formatContent(u,o[u.id]);var l=n(i),a=n("#dt_grid_"+h+' tr[dataNo="'+e+'"]'),v=n("#dt_grid_"+h+' .dt-grid-extra-columns>td[dataNo="'+e+'"]');t(c,o,u,f,e,s,l,a,v,r)},bindHeaderEvent:function(t,i,r){var u=this,o=u.option.id,f=n(i).attr("columnNo"),e=u.option.columns[f],s=e.title,h=n(i),c=n("#dt_grid_"+o+" tr.dt-grid-headers");t(s,e,u,f,h,c,r)},bindGridEvent:function(n,t){var i=this;n(i,t)},bindExtraEvent:function(t,i,r){var f=this,e=f.option.id,u=n(i).attr("dataNo"),o=f.exhibitDatas[u],s=n("#dt_grid_"+e+' tr[dataNo="'+u+'"]'),h=n("#dt_grid_"+e+' .dt-grid-extra-columns>td[dataNo="'+u+'"]');t(o,f,u,s,h,r)},bindCheckEvent:function(t,i,r){var f=this,e=f.option.id,u=n(i).attr("dataNo"),o=f.exhibitDatas[u],s=n("#dt_grid_"+e+' tr[dataNo="'+u+'"]'),h=n("#dt_grid_"+e+' .dt-grid-extra-columns>td[dataNo="'+u+'"]');t(i.checked,o,f,u,s,h,r)},constructGridPageBar:function(){var t=this,r,h,b,nt,p,c,g,l,a,i,u,tt,v,y;n("#"+t.option.toolbarContainer+" .dt-grid-pager").html("");var f=t.pager.nowPage,s=t.pager.pageCount,w=document.createElement("span");if(t.exhibitDatas==null||t.exhibitDatas.length<=0)w.className="dt-grid-pager-status text-primary",w.innerHTML=n.fn.DtGrid.lang[t.option.lang].pageInfo.nothing;else{if(w.className="dt-grid-pager-status text-primary",r=n.fn.DtGrid.lang[t.option.lang].pageInfo.info,r=n.fn.DtGrid.tools.replaceAll(r,"{startRecord}",t.pager.startRecord),r=n.fn.DtGrid.tools.replaceAll(r,"{nowPage}",t.pager.nowPage),r=n.fn.DtGrid.tools.replaceAll(r,"{recordCount}",t.pager.recordCount),r=n.fn.DtGrid.tools.replaceAll(r,"{pageCount}",t.pager.pageCount),h="",b=t.pager.pageSize,typeof t.option.pageSizeLimit=="object"){for(h+='<select id="dt_grid_change_page_size_'+t.option.id+'" name="dt_grid_change_page_size_'+t.option.id+'" class="form-control change-page-size">',nt=!1,p=[],i=0;i<t.option.pageSizeLimit.length;i++)c=t.option.pageSizeLimit[i],p.push(parseFloat(c)),b==c&&(nt=!0);for(nt||p.push(b),p.sort(function(n,t){return n>t}),i=0;i<p.length;i++)c=p[i],h+="\t<option "+(b==c?'selected="selected"':"")+' value="'+c+'">'+c+"<\/option>";h+="<\/select>";r=n.fn.DtGrid.tools.replaceAll(r,"{pageSize}",h)}else typeof t.option.pageSizeLimit=="number"?(h+='<input id="dt_grid_change_page_size_'+t.option.id+'" name="dt_grid_change_page_size_'+t.option.id+'" type="text" class="form-control change-page-size" value="'+t.pager.pageSize+'" />',r=n.fn.DtGrid.tools.replaceAll(r,"{pageSize}",h)):r=n.fn.DtGrid.tools.replaceAll(r,"{pageSize}",b);w.innerHTML=r}if(g=document.createElement("ul"),g.id=t.option.id+"_dtGridOperations",g.className="pagination pagination-sm dt-grid-pager-button",n("#"+t.option.toolbarContainer+" .dt-grid-pager").append(g),n("#"+t.option.toolbarContainer+" .dt-grid-pager").append(w),n("#dt_grid_change_page_size_"+t.option.id).change(function(){var i=parseFloat(this.value);if(isNaN(i)){n.fn.DtGrid.tools.toast(n.fn.DtGrid.lang[t.option.lang].pageInfo.errors.notANumber,"warning",3e3);n("#dt_grid_change_page_size_"+t.option.id).val(t.pager.pageSize);return}if(typeof t.option.pageSizeLimit=="number"&&i>t.option.pageSizeLimit){n.fn.DtGrid.tools.toast(n.fn.DtGrid.tools.replaceAll(n.fn.DtGrid.lang[t.option.lang].pageInfo.errors.maxPageSize,"{pageSizeLimit}",t.option.pageSizeLimit),"warning",3e3);n("#dt_grid_change_page_size_"+t.option.id).val(t.pager.pageSize);return}t.pager.pageSize=i;t.pager.nowPage=1;t.reload(!0)}),t.exhibitDatas!=null&&t.exhibitDatas.length>0){if(l=document.createElement("li"),l.id="dt_grid_"+t.option.id+"_page_first",l.title=n.fn.DtGrid.lang[t.option.lang].pageInfo.firstPageTitle,f<=1&&(l.className="disabled",l.title=n.fn.DtGrid.lang[t.option.lang].pageInfo.alreadyFirstPage),l.innerHTML='<a href="javascript:void(0);">'+n.fn.DtGrid.lang[t.option.lang].pageInfo.firstPage+"<\/a>",n("#"+t.option.id+"_dtGridOperations").append(l),n("#dt_grid_"+t.option.id+"_page_first").click(function(){t.loadByPage("first")}),a=document.createElement("li"),a.id="dt_grid_"+t.option.id+"_page_prev",a.title=n.fn.DtGrid.lang[t.option.lang].pageInfo.prevPageTitle,f<=1&&(a.className="disabled",a.title=n.fn.DtGrid.lang[t.option.lang].pageInfo.alreadyFirstPage),a.innerHTML='<a href="javascript:void(0);">'+n.fn.DtGrid.lang[t.option.lang].pageInfo.prevPage+"<\/a>",n("#"+t.option.id+"_dtGridOperations").append(a),n("#dt_grid_"+t.option.id+"_page_prev").click(function(){t.loadByPage("prev")}),s<=5)for(i=1;i<=s;i++)u=document.createElement("li"),u.id="dt_grid_"+t.option.id+"_page_"+i,u.setAttribute("page",i),u.title=n.fn.DtGrid.tools.replaceAll(n.fn.DtGrid.lang[t.option.lang].pageInfo.nowPageTitle,"{nowPage}",i),u.className=i==f?"active":"",u.innerHTML='<a href="javascript:void(0);">'+n.fn.DtGrid.tools.replaceAll(n.fn.DtGrid.lang[t.option.lang].pageInfo.nowPage,"{nowPage}",i)+"<\/a>",n("#"+t.option.id+"_dtGridOperations").append(u),i!=f&&n("#dt_grid_"+t.option.id+"_page_"+i).click(function(){t.goPage(n(this).attr("page"))});else{var k=2,d=2,e=f-k<1?1:f-k,o=f+d>s?s:f+d;for(o-e+1<k+d+1&&(e==1&&(o=o+(k+d+1-(o-e+1)),o=o>s?s:o),o==s&&(e=e-(k+d+1-(o-e+1)),e=e<1?1:e)),i=e;i<=o;i++)u=document.createElement("li"),u.id="dt_grid_"+t.option.id+"_page_"+i,u.setAttribute("page",i),u.title=n.fn.DtGrid.tools.replaceAll(n.fn.DtGrid.lang[t.option.lang].pageInfo.nowPageTitle,"{nowPage}",i),u.className=i==f?"active":"",u.innerHTML='<a href="javascript:void(0);">'+n.fn.DtGrid.tools.replaceAll(n.fn.DtGrid.lang[t.option.lang].pageInfo.nowPage,"{nowPage}",i)+"<\/a>",n("#"+t.option.id+"_dtGridOperations").append(u),i!=f&&n("#dt_grid_"+t.option.id+"_page_"+i).click(function(){t.goPage(n(this).attr("page"))})}tt=document.createElement("li");tt.className="active";tt.innerHTML='<a href="javascript:void(0);">'+t.pager.nowPage+"<\/a>";v=document.createElement("li");v.id="dt_grid_"+t.option.id+"_page_next";v.title=n.fn.DtGrid.lang[t.option.lang].pageInfo.nextPageTitle;f>=s&&(v.className="disabled",v.title=n.fn.DtGrid.lang[t.option.lang].pageInfo.alreadyLastPage);v.innerHTML='<a href="javascript:void(0);">'+n.fn.DtGrid.lang[t.option.lang].pageInfo.nextPage+"<\/a>";n("#"+t.option.id+"_dtGridOperations").append(v);n("#dt_grid_"+t.option.id+"_page_next").click(function(){t.loadByPage("next")});y=document.createElement("li");y.id="dt_grid_"+t.option.id+"_page_last";y.title=n.fn.DtGrid.lang[t.option.lang].pageInfo.lastPageTitle;f>=s&&(y.className="disabled",y.title=n.fn.DtGrid.lang[t.option.lang].pageInfo.alreadyLastPage);y.innerHTML='<a href="javascript:void(0);">'+n.fn.DtGrid.lang[t.option.lang].pageInfo.lastPage+"<\/a>";n("#"+t.option.id+"_dtGridOperations").append(y);n("#dt_grid_"+t.option.id+"_page_last").click(function(){t.loadByPage("last")})}n("#"+t.option.toolbarContainer+" .dt-grid-pager").append('<div class="clearfix"><\/div>');n("#"+t.option.toolbarContainer).append('<div class="clearfix"><\/div>')},toolbar:function(t){var i=this,r={refresh:'<li title="'+n.fn.DtGrid.lang[i.option.lang].toolbar.refreshTitle+'"><a href="javascript:void(0);" id="refreshGrid_replaceId">'+n.fn.DtGrid.lang[i.option.lang].toolbar.refresh+"<\/a><\/li>",faseQuery:'<li title="'+n.fn.DtGrid.lang[i.option.lang].toolbar.faseQueryTitle+'"><a href="javascript:void(0);" id="faseQuery_replaceId">'+n.fn.DtGrid.lang[i.option.lang].toolbar.faseQuery+"<\/a><\/li>",advanceQuery:'<li title="'+n.fn.DtGrid.lang[i.option.lang].toolbar.advanceQueryTitle+'"><a href="javascript:void(0);" id="advanceQuery_replaceId">'+n.fn.DtGrid.lang[i.option.lang].toolbar.advanceQuery+"<\/a><\/li>",exportExcel:'<li title="'+n.fn.DtGrid.lang[i.option.lang].toolbar.exportExcelTitle+'"><a href="javascript:void(0);" id="exportExcelGrid_replaceId">'+n.fn.DtGrid.lang[i.option.lang].toolbar.exportExcel+"<\/a><\/li>",exportCsv:'<li title="'+n.fn.DtGrid.lang[i.option.lang].toolbar.exportCsvTitle+'"><a href="javascript:void(0);" id="exportCsvGrid_replaceId">'+n.fn.DtGrid.lang[i.option.lang].toolbar.exportCsv+"<\/a><\/li>",exportPdf:'<li title="'+n.fn.DtGrid.lang[i.option.lang].toolbar.exportPdfTitle+'"><a href="javascript:void(0);" id="exportPdfGrid_replaceId">'+n.fn.DtGrid.lang[i.option.lang].toolbar.exportPdf+"<\/a><\/li>",exportTxt:'<li title="'+n.fn.DtGrid.lang[i.option.lang].toolbar.exportTxtTitle+'"><a href="javascript:void(0);" id="exportTxtGrid_replaceId">'+n.fn.DtGrid.lang[i.option.lang].toolbar.exportTxt+"<\/a><\/li>",print:'<li title="'+n.fn.DtGrid.lang[i.option.lang].toolbar.printTitle+'"><a href="javascript:void(0);" id="printGrid_replaceId">'+n.fn.DtGrid.lang[i.option.lang].toolbar.print+"<\/a><\/li>"};return r[t]},constructGridToolBar:function(){var t=this,o,e,i,f,u,r;if(n("#"+t.option.toolbarContainer).html('<span class="pagination pagination-sm dt-grid-tools"><\/span><span class="dt-grid-pager"><\/span>'),t.option.tools!=undefined&&t.option.tools!=null&&t.option.tools!="")for(o=t.option.tools,e=0;e<o.split("|").length;e++){if(i=o.split("|")[e],i=="refresh"&&(r=n.fn.DtGrid.tools.replaceAll(t.toolbar("refresh"),"replaceId",t.option.id),n("#"+t.option.toolbarContainer+" .dt-grid-tools").append(r),n("#refreshGrid_"+t.option.id).click(function(){t.reload(!0)})),i=="faseQuery"&&(r=n.fn.DtGrid.tools.replaceAll(t.toolbar("faseQuery"),"replaceId",t.option.id),n("#"+t.option.toolbarContainer+" .dt-grid-tools").append(r),n("#faseQuery_"+t.option.id).click(function(){t.faseQuery()})),i=="advanceQuery"&&(r=n.fn.DtGrid.tools.replaceAll(t.toolbar("advanceQuery"),"replaceId",t.option.id),n("#"+t.option.toolbarContainer+" .dt-grid-tools").append(r),n("#advanceQuery_"+t.option.id).click(function(){t.advanceQuery()})),i.indexOf("export")!=-1){for(i=n.fn.DtGrid.tools.replaceAll(i,"export",""),i=n.fn.DtGrid.tools.replaceAll(i,"\\[",""),i=n.fn.DtGrid.tools.replaceAll(i,"\\]",""),r="",f=0;f<i.split(",").length;f++)u=i.split(",")[f],u=="excel"&&(r+=n.fn.DtGrid.tools.replaceAll(t.toolbar("exportExcel"),"replaceId",t.option.id)),u=="csv"&&(r+=n.fn.DtGrid.tools.replaceAll(t.toolbar("exportCsv"),"replaceId",t.option.id)),u=="pdf"&&(r+=n.fn.DtGrid.tools.replaceAll(t.toolbar("exportPdf"),"replaceId",t.option.id)),u=="txt"&&(r+=n.fn.DtGrid.tools.replaceAll(t.toolbar("exportTxt"),"replaceId",t.option.id));for(n("#"+t.option.toolbarContainer+" .dt-grid-tools").append(r),f=0;f<i.split(",").length;f++)u=i.split(",")[f],u=="excel"&&n("#exportExcelGrid_"+t.option.id).click(function(){t.exportFile("excel")}),u=="csv"&&n("#exportCsvGrid_"+t.option.id).click(function(){t.exportFile("csv")}),u=="pdf"&&n("#exportPdfGrid_"+t.option.id).click(function(){t.exportFile("pdf")}),u=="txt"&&n("#exportTxtGrid_"+t.option.id).click(function(){t.exportFile("txt")})}i=="print"&&(r=n.fn.DtGrid.tools.replaceAll(t.toolbar("print"),"replaceId",t.option.id),n("#"+t.option.toolbarContainer+" .dt-grid-tools").append(r),n("#printGrid_"+t.option.id).click(function(){t.print()}))}},processBarThread:null,processWidth:null,showProcessBar:function(){var t=this,i;clearInterval(t.processBarThread);n("#dt_grid_process_bar_top_"+t.option.id).remove();n("#dt_grid_process_bar_bottom_"+t.option.id).remove();t.processWidth=0;t.processBarThread=null;i="";i+='<div class="dt-grid-process-bar-top bg-primary" id="dt_grid_process_bar_top_'+t.option.id+'"><\/div>';i+='<div class="dt-grid-process-bar-bottom bg-primary" id="dt_grid_process_bar_bottom_'+t.option.id+'"><\/div>';n("#"+t.option.gridContainer).append(i);t.processWidth+=Math.random()*(100-t.processWidth)*.1;n("#dt_grid_process_bar_top_"+t.option.id).animate({width:t.processWidth+"%"},200);n("#dt_grid_process_bar_bottom_"+t.option.id).animate({width:t.processWidth+"%"},200);t.processBarThread=setInterval(function(){t.processWidth+=Math.random()*(100-t.processWidth)*.1;n("#dt_grid_process_bar_top_"+t.option.id).animate({width:t.processWidth+"%"},200);n("#dt_grid_process_bar_bottom_"+t.option.id).animate({width:t.processWidth+"%"},200)},200)},hideProcessBar:function(t){var i=this;clearInterval(i.processBarThread);i=this;n("#dt_grid_process_bar_top_"+i.option.id).animate({width:"100%"},100,function(){n("#dt_grid_process_bar_top_"+i.option.id).remove();t()});n("#dt_grid_process_bar_bottom_"+i.option.id).animate({width:"100%"},100,function(){n("#dt_grid_process_bar_bottom_"+i.option.id).remove()})},formatContent:function(t,i){try{if(t.codeTable){var r=t.codeTable[i];return r?r:i}if(t.type=="number"&&t.format)return n.fn.DtGrid.tools.numberFormat(i,t.format);if(t.type=="date"&&t.format){if(i=="")return i;if(t.otype){if(t.otype=="time_stamp_s")return i=new Date(parseFloat(i)*1e3),n.fn.DtGrid.tools.dateFormat(i,t.format);if(t.otype=="time_stamp_ms")return i=new Date(parseFloat(i)),n.fn.DtGrid.tools.dateFormat(i,t.format);if(t.otype=="string"&&t.oformat)return i=n.fn.DtGrid.tools.toDate(i,t.oformat),n.fn.DtGrid.tools.dateFormat(i,t.format)}else return n.fn.DtGrid.tools.dateFormat(i,t.format)}}catch(u){}return i},getExtraColumnClass:function(){for(var u,e,f,i,s=this,r="",t=[!0,!0,!0,!0],o=s.option.columns,n=0;n<o.length;n++)if(u=o[n],u.hide!=!0&&u.hideType!=undefined)for(e=u.hideType.split("|"),f=0;f<e.length;f++)i=e[f],i=="lg"&&(t[0]="visible-lg"),i=="md"&&(t[1]="visible-md"),i=="sm"&&(t[2]="visible-sm"),i=="xs"&&(t[3]="visible-xs");for(n=0;n<t.length;n++)t[n]!=!0&&(r+=t[n]+" ");return r==""&&(r="hidden "),r},getColumnClassForHide:function(n){var t="",u,r,i;if(n.hide==!0)return t+"hidden ";if(n.hideType!=undefined)for(u=n.hideType.split("|"),r=0;r<u.length;r++)i=u[r],i=="lg"&&(t+="hidden-lg "),i=="md"&&(t+="hidden-md "),i=="sm"&&(t+="hidden-sm "),i=="xs"&&(t+="hidden-xs ");return t},getExtraColumnClassForHide:function(n){var t="",u,r,i;if(n.hide==!0)return t+"hidden ";if(n.hideType!=undefined){for(u=n.hideType.split("|"),r=0;r<u.length;r++)i=u[r],i=="lg"&&(t+="visible-lg "),i=="md"&&(t+="visible-md "),i=="sm"&&(t+="visible-sm "),i=="xs"&&(t+="visible-xs ");t==""&&(t="hidden ")}else t="hidden ";return t},goPage:function(n){var t=this,u=t.pager.pageSize,r=t.pager.pageCount,i=parseFloat(n);isNaN(i)||(0<i&&i<=r&&(t.pager.nowPage=i,t.pager.startRecord=u*(i-1),t.load()),i<=0&&t.loadByPage("first"),i>r&&t.loadByPage("last"))},loadByPage:function(n){var t=this,i,u,r;if(n=n?n:"",n=="first")i=t.pager.nowPage,i>1&&(t.pager.startRecord=0,t.pager.nowPage=1,t.load());else if(n=="prev")i=t.pager.nowPage,u=t.pager.pageSize,i>1&&(i--,t.pager.nowPage=i,t.pager.startRecord=u*(i-1),t.load());else if(n=="next"){var i=t.pager.nowPage,u=t.pager.pageSize,r=t.pager.pageCount;i<r&&(i++,t.pager.nowPage=i,t.pager.startRecord=u*(i-1),t.load())}else n=="last"?(i=t.pager.nowPage,r=t.pager.pageCount,i<r&&(u=t.pager.pageSize,r=t.pager.pageCount,t.pager.nowPage=r==0?1:r,t.pager.startRecord=u*(r-1),t.pager.startRecord<0&&(t.pager.startRecord=0),t.load())):t.load()},faseQuery:function(){var r=this,i,u,t,e,o,f;if(r.init.fastQueryWindowIsInit){n("#faseQuery_"+r.option.id+"Modal").modal("show");return}for(i="",i+=n.fn.DtGrid.tools.getWindowStart("faseQuery_"+r.option.id,n.fn.DtGrid.lang[r.option.lang].fastQuery.title),i+='<form id="faseQueryForm_'+r.option.id+'">',i+='\t<div class="modal-body form-horizontal">',u=0;u<r.option.columns.length;u++)if(t=r.option.columns[u],t.fastQuery==!0){if(i+='<div class="form-group">',i+='\t<label class="col-sm-3 control-label text-right">'+t.title+"\uff1a<\/label>",t.fastQueryType=="range")i+='<div class="col-sm-4">',t.type=="date"?(i+='<div class="input-group">',i+='\t<input type="text" class="form-control" id="ge_'+t.id+'" name="ge_'+t.id+'" format="'+t.format+'" placeholder="'+n.fn.DtGrid.lang[r.option.lang].fastQuery.selectStart+t.title+'" onclick="WdatePicker({dateFmt:\''+n.fn.DtGrid.tools.replaceAll(t.format,"h","H")+"'});\" />",i+='\t<div class="input-group-addon"><i class="fa fa-calendar"><\/i><\/div>',i+="<\/div>"):i+='<input type="text" class="form-control" id="ge_'+t.id+'" name="ge_'+t.id+'" placeholder="'+n.fn.DtGrid.lang[r.option.lang].fastQuery.inputStart+t.title+'" />',i+="<\/div>",i+='<div class="col-sm-4">',t.type=="date"?(i+='<div class="input-group">',i+='\t<input type="text" class="form-control" id="le_'+t.id+'" name="le_'+t.id+'" format="'+t.format+'" placeholder="'+n.fn.DtGrid.lang[r.option.lang].fastQuery.selectEnd+t.title+'" onclick="WdatePicker({dateFmt:\''+n.fn.DtGrid.tools.replaceAll(t.format,"h","H")+"'});\" />",i+='\t<div class="input-group-addon"><i class="fa fa-calendar"><\/i><\/div>',i+="<\/div>"):i+='<input type="text" class="form-control" id="le_'+t.id+'" name="le_'+t.id+'" placeholder="'+n.fn.DtGrid.lang[r.option.lang].fastQuery.inputEnd+t.title+'" />',i+="<\/div>";else if(t.codeTable){i+='<div class="col-sm-4">';i+='\t<select class="form-control" id="'+t.fastQueryType+"_"+t.id+'" name="'+t.fastQueryType+"_"+t.id+'">';i+='\t\t<option value="">'+n.fn.DtGrid.lang[r.option.lang].fastQuery.codeTableSelectAll+"<\/option>";for(e in t.codeTable)i+='\t<option value="'+e+'">'+t.codeTable[e]+"<\/option>";i+="\t<\/select>";i+="<\/div>"}else i+='<div class="col-sm-4">',t.type=="date"?(i+='<div class="input-group">',o=n.fn.DtGrid.lang[r.option.lang].fastQuery.selectStart,(t.fastQueryType=="lt"||t.fastQueryType=="le")&&(o=n.fn.DtGrid.lang[r.option.lang].fastQuery.selectEnd),i+='\t<input type="text" class="form-control" id="'+t.fastQueryType+"_"+t.id+'" name="'+t.fastQueryType+"_"+t.id+'" format="'+t.format+'" placeholder="'+o+t.title+'" onclick="WdatePicker({dateFmt:\''+n.fn.DtGrid.tools.replaceAll(t.format,"h","H")+"'});\" />",i+='\t<div class="input-group-addon"><i class="fa fa-calendar"><\/i><\/div>',i+="<\/div>"):i+='<input type="text" class="form-control" id="'+t.fastQueryType+"_"+t.id+'" name="'+t.fastQueryType+"_"+t.id+'" placeholder="'+n.fn.DtGrid.lang[r.option.lang].fastQuery.input+t.title+'" />',i+="<\/div>";i+="<\/div>"}i+="\t<\/div>";i+="<\/form>";f="";f+='<button type="button" class="btn btn-warning" id="resetFaseQuery_'+r.option.id+'">'+n.fn.DtGrid.lang[r.option.lang].fastQuery.buttons.reset+"<\/button>";f+='<button type="button" class="btn btn-primary" id="doFaseQuery_'+r.option.id+'">'+n.fn.DtGrid.lang[r.option.lang].fastQuery.buttons.query+"<\/button>";i+=n.fn.DtGrid.tools.getWindowEnd(n.fn.DtGrid.lang[r.option.lang].buttons.close,f);n("body").append(i);n("#resetFaseQuery_"+r.option.id).click(function(){document.forms["faseQueryForm_"+r.option.id].reset()});n("#doFaseQuery_"+r.option.id).click(function(){r.doFaseQuery(document.forms["faseQueryForm_"+r.option.id]);n("#faseQuery_"+r.option.id+"Modal").modal("hide")});n("#faseQuery_"+r.option.id+"Modal").modal("show");r.init.fastQueryWindowIsInit=!0},doFaseQuery:function(t){var r=this,f,u,i;for(r.fastQueryParameters={},f=t.elements,u=0;u<f.length;u++)i=f[u],n.fn.DtGrid.tools.equalsIgnoreCase(i.type,"text")||n.fn.DtGrid.tools.equalsIgnoreCase(i.type,"hidden")||n.fn.DtGrid.tools.equalsIgnoreCase(i.type,"textarea")||n.fn.DtGrid.tools.equalsIgnoreCase(i.type,"select-one")||n.fn.DtGrid.tools.equalsIgnoreCase(i.type,"password")?i.name!=""&&(r.fastQueryParameters[i.name]=i.value,r.fastQueryParameters[i.name+"_format"]=i.getAttribute("format")):(n.fn.DtGrid.tools.equalsIgnoreCase(i.type,"checkbox")||n.fn.DtGrid.tools.equalsIgnoreCase(i.type,"radio"))&&i.checked&&i.name!=""&&(r.fastQueryParameters[i.name]=i.value,r.fastQueryParameters[i.name+"_format"]=i.getAttribute("format"));r.load()},doFaseQueryDatasFilter:function(t,i){for(var e,f,u,r,s=[],o=0;o<t.length;o++){e=t[o];f=!0;for(u in i)if(i[u]&&i[u]!=null&&i[u]!=""){if(n.fn.DtGrid.tools.startsWith(u,"eq_")&&(r=e[u.replace("eq_","")],r=r?r:"",r!=i[u])){f=!1;continue}if(n.fn.DtGrid.tools.startsWith(u,"ne_")&&(r=e[u.replace("ne_","")],r=r?r:"",r==i[u])){f=!1;continue}if(n.fn.DtGrid.tools.startsWith(u,"lk_")&&(r=e[u.replace("lk_","")],r=r?r:"",r.indexOf(i[u])==-1)){f=!1;continue}if(n.fn.DtGrid.tools.startsWith(u,"ll_")&&(r=e[u.replace("ll_","")],r=r?r:"",!n.fn.DtGrid.tools.startsWith(r,i[u]))){f=!1;continue}if(n.fn.DtGrid.tools.startsWith(u,"rl_")&&(r=e[u.replace("rl_","")],r=r?r:"",!n.fn.DtGrid.tools.endsWith(r,i[u]))){f=!1;continue}if(n.fn.DtGrid.tools.startsWith(u,"gt_")){if(r=e[u.replace("gt_","")],r=r?r:"",r instanceof Date&&r.getTime()-n.fn.DtGrid.tools.toDate(i[u],i[u+"_format"]).getTime()<=0){f=!1;continue}if(!(r instanceof Date)&&!isNaN(r)&&parseFloat(r)-parseFloat(i[u])<=0){f=!1;continue}if(!(r instanceof Date)&&isNaN(r)&&r.localeCompare(i[u])<=0){f=!1;continue}}if(n.fn.DtGrid.tools.startsWith(u,"ge_")){if(r=e[u.replace("ge_","")],r=r?r:"",r instanceof Date&&r.getTime()-n.fn.DtGrid.tools.toDate(i[u],i[u+"_format"]).getTime()<0){f=!1;continue}if(!(r instanceof Date)&&!isNaN(r)&&parseFloat(r)-parseFloat(i[u])<0){f=!1;continue}if(!(r instanceof Date)&&isNaN(r)&&r.localeCompare(i[u])<0){f=!1;continue}}if(n.fn.DtGrid.tools.startsWith(u,"lt_")){if(r=e[u.replace("lt_","")],r=r?r:"",r instanceof Date&&r.getTime()-n.fn.DtGrid.tools.toDate(i[u],i[u+"_format"]).getTime()>=0){f=!1;continue}if(!(r instanceof Date)&&!isNaN(r)&&parseFloat(r)-parseFloat(i[u])>=0){f=!1;continue}if(!(r instanceof Date)&&isNaN(r)&&r.localeCompare(i[u])>=0){f=!1;continue}}if(n.fn.DtGrid.tools.startsWith(u,"le_")){if(r=e[u.replace("le_","")],r=r?r:"",r instanceof Date&&r.getTime()-n.fn.DtGrid.tools.toDate(i[u],i[u+"_format"]).getTime()>0){f=!1;continue}if(!(r instanceof Date)&&!isNaN(r)&&parseFloat(r)-parseFloat(i[u])>0){f=!1;continue}if(!(r instanceof Date)&&isNaN(r)&&r.localeCompare(i[u])>0){f=!1;continue}}}f&&s.push(e)}return s},advanceQuery:function(){var i=this,t,r;if(i.init.advanceQueryWindowIsInit){n("#advanceQuery_"+i.option.id+"Modal").modal("show");return}t="";t+=n.fn.DtGrid.tools.getWindowStart("advanceQuery_"+i.option.id,n.fn.DtGrid.lang[i.option.lang].advanceQuery.title);t+='<div class="modal-body advance-query">';t+='\t<ul class="nav nav-tabs" role="tablist">';t+='\t\t<li class="active"><a href="#advance_query_condition_'+i.option.id+'" role="tab" data-toggle="tab">'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.title+"<\/a><\/li>";t+='\t\t<li><a href="#advance_query_sort_'+i.option.id+'" role="tab" data-toggle="tab">'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.sort.title+"<\/a><\/li>";t+="\t<\/ul>";t+='\t<div class="tab-content">';t+='\t\t<div class="tab-pane active" id="advance_query_condition_'+i.option.id+'">';t+='\t\t\t<div class="panel panel-default">';t+='\t\t\t\t<div class="form-horizontal text-right advance-query-buttons">';t+='\t\t\t\t\t<button id="insertConditionTr_'+i.option.id+'" title="'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.buttons.insertTitle+'" class="btn btn-xs btn-primary">';t+="\t\t\t\t\t\t"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.buttons.insert;t+="\t\t\t\t\t<\/button>";t+='\t\t\t\t\t<button id="clearConditionTr_'+i.option.id+'" title="'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.buttons.clearTitle+'" class="btn btn-xs btn-danger">';t+="\t\t\t\t\t\t"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.buttons.clear;t+="\t\t\t\t\t<\/button>";t+="\t\t\t\t<\/div>";t+='\t\t\t\t<div class="advance-query-table-container">';t+='\t\t\t\t\t<table id="conditionTable_'+i.option.id+'" class="table table-bordered table-striped table-hover table-condition table-center" style="width:860px;">';t+="\t\t\t\t\t\t<tr>";t+='\t\t\t\t\t\t\t<th style="width:50px;">'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.table.sequence+"<\/th>";t+='\t\t\t\t\t\t\t<th style="width:100px;">'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.table.operation+"<\/th>";t+='\t\t\t\t\t\t\t<th style="width:80px;">'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.table.leftParentheses+"<\/th>";t+='\t\t\t\t\t\t\t<th style="width:140px;">'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.table.field+"<\/th>";t+='\t\t\t\t\t\t\t<th style="width:120px;">'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.table.condition+"<\/th>";t+="\t\t\t\t\t\t\t<th>"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.table.value+"<\/th>";t+='\t\t\t\t\t\t\t<th style="width:80px;">'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.table.rightParentheses+"<\/th>";t+='\t\t\t\t\t\t\t<th style="width:90px;">'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.condition.table.logic+"<\/th>";t+="\t\t\t\t\t\t<\/tr>";t+="\t\t\t\t\t<\/table>";t+="\t\t\t\t<\/div>";t+='\t\t\t\t<div class="clearfix"><\/div>';t+="\t\t\t<\/div>";t+="\t\t<\/div>";t+='\t\t<div class="tab-pane" id="advance_query_sort_'+i.option.id+'">';t+='\t\t\t<div class="panel panel-default">';t+='\t\t\t\t<div class="form-horizontal text-right advance-query-buttons">';t+='\t\t\t\t\t<button id="insertSortTr_'+i.option.id+'" title="'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.sort.buttons.insertTitle+'" class="btn btn-xs btn-primary">';t+="\t\t\t\t\t\t"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.sort.buttons.insert;t+="\t\t\t\t\t<\/button>";t+='\t\t\t\t\t<button id="clearSortTr_'+i.option.id+'" title="'+n.fn.DtGrid.lang[i.option.lang].advanceQuery.sort.buttons.clearTitle+'" class="btn btn-xs btn-danger">';t+="\t\t\t\t\t\t"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.sort.buttons.clear;t+="\t\t\t\t\t<\/button>";t+="\t\t\t\t<\/div>";t+='\t\t\t\t<div class="advance-query-table-container">';t+='\t\t\t\t\t<table id="sortTable_'+i.option.id+'" class="table table-bordered table-striped table-hover table-condition table-center">';t+="\t\t\t\t\t\t<tr>";t+="\t\t\t\t\t\t\t<th>"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.sort.table.sequence+"<\/th>";t+="\t\t\t\t\t\t\t<th>"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.sort.table.operation+"<\/th>";t+="\t\t\t\t\t\t\t<th>"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.sort.table.field+"<\/th>";t+="\t\t\t\t\t\t\t<th>"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.sort.table.logic+"<\/th>";t+="\t\t\t\t\t\t<\/tr>";t+="\t\t\t\t\t<\/table>";t+="\t\t\t\t<\/div>";t+='\t\t\t\t<div class="clearfix"><\/div>';t+="\t\t\t<\/div>";t+="\t\t<\/div>";t+="\t<\/div>";t+="<\/div>";r="";r+='<button type="button" class="btn btn-primary" id="doAdvanceQuery_'+i.option.id+'">';r+="\t"+n.fn.DtGrid.lang[i.option.lang].advanceQuery.buttons.query;r+="<\/button>";t+=n.fn.DtGrid.tools.getWindowEnd(n.fn.DtGrid.lang[i.option.lang].buttons.close,r);n("body").append(t);n("#insertConditionTr_"+i.option.id).click(function(){i.insertConditionTr()});n("#clearConditionTr_"+i.option.id).click(function(){i.clearConditionTr()});n("#insertSortTr_"+i.option.id).click(function(){i.insertSortTr()});n("#clearSortTr_"+i.option.id).click(function(){i.clearSortTr()});n("#doAdvanceQuery_"+i.option.id).click(function(){i.doAdvanceQuery()});n("#advanceQuery_"+i.option.id+"Modal").modal("show");i.init.advanceQueryWindowIsInit=!0},doAdvanceQuery:function(){var t=this,i=!0,u=[],r;n("#conditionTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").each(function(){var f=this.id.split("_")[2],e=n("#conditionTable_"+t.option.id+" #seqTd_"+t.option.id+"_"+f).html(),h=n("#conditionTable_"+t.option.id+" #leftParentheses_"+t.option.id+"_"+f).val(),o=n("#conditionTable_"+t.option.id+" #field_"+t.option.id+"_"+f).val(),c=n("#conditionTable_"+t.option.id+" #format_"+t.option.id+"_"+f).val(),s=n("#conditionTable_"+t.option.id+" #condition_"+t.option.id+"_"+f).val(),l=n("#conditionTable_"+t.option.id+" #value_"+t.option.id+"_"+f).val(),a=n("#conditionTable_"+t.option.id+" #rightParentheses_"+t.option.id+"_"+f).val(),v=n("#conditionTable_"+t.option.id+" #logic_"+t.option.id+"_"+f).val(),r;if(o=="")return n.fn.DtGrid.tools.toast(n.fn.DtGrid.tools.replaceAll(n.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.errors.fieldMustSelect,"{sequence}",e),"warning",3e3),i=!1,!1;if(s=="")return n.fn.DtGrid.tools.toast(n.fn.DtGrid.tools.replaceAll(n.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.errors.conditionMustSelect,"{sequence}",e),"warning",3e3),i=!1,!1;r={};r.id=f;r.seq=e;r.leftParentheses=h;r.field=o;r.format=c;r.condition=s;r.value=l;r.rightParentheses=a;r.logic=v;u.push(r)});r=[];n("#sortTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").each(function(){var f=this.id.split("_")[2],e=n("#sortTable_"+t.option.id+" #seqTd_"+t.option.id+"_"+f).html(),o=n("#sortTable_"+t.option.id+" #sortField_"+t.option.id+"_"+f).val(),s=n("#sortTable_"+t.option.id+" #sortLogic_"+t.option.id+"_"+f).val(),u;if(o=="")return n.fn.DtGrid.tools.toast(n.fn.DtGrid.tools.replaceAll(n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.errors.fieldMustSelect,"{sequence}",e),"warning",3e3),i=!1,!1;if(s=="")return n.fn.DtGrid.tools.toast(n.fn.DtGrid.tools.replaceAll(n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.errors.logicMustSelect,"{sequence}",e),"warning",3e3),i=!1,!1;u={};u.field=o;u.logic=s;r.push(u)});i&&(t.advanceQueryParameter={},t.advanceQueryParameter.advanceQueryConditions=u,t.advanceQueryParameter.advanceQuerySorts=r,t.load(),n("#advanceQuery_"+t.option.id+"Modal").modal("hide"))},doAdvanceQueryDatasFilter:function(t,i){for(var e,u,s,r,f,o=[],h=0;h<t.length;h++)if(e=t[h],i.advanceQueryConditions&&i.advanceQueryConditions.length>0){for(u="",s=0;s<i.advanceQueryConditions.length;s++)r=i.advanceQueryConditions[s],u+=r.leftParentheses,r.condition=="0"&&(u+='record["'+r.field+'"]=="'+r.value+'"'),r.condition=="1"&&(u+='record["'+r.field+'"]!="'+r.value+'"'),r.condition=="2"&&(u+='record["'+r.field+'"].indexOf("'+r.value+'")!=-1'),r.condition=="3"&&(u+='$.fn.DtGrid.tools.startsWith(record["'+r.field+'"], "'+r.value+'")'),r.condition=="4"&&(u+='$.fn.DtGrid.tools.endsWith(record["'+r.field+'"], "'+r.value+'")'),r.condition=="5"&&(f=e[r.field],f instanceof Date&&(u+='(record["'+r.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+r.value+'", "'+r.format+'").getTime())>0'),f instanceof Date||isNaN(f)||(u+='(parseFloat(record["'+r.field+'"]) - parseFloat("'+r.value+'"))>0'),f instanceof Date||!isNaN(f)||(u+='record["'+r.field+'"].localeCompare("'+r.value+'")>0')),r.condition=="6"&&(f=e[r.field],f instanceof Date&&(u+='(record["'+r.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+r.value+'", "'+r.format+'").getTime())>=0'),f instanceof Date||isNaN(f)||(u+='(parseFloat(record["'+r.field+'"]) - parseFloat("'+r.value+'"))>=0'),f instanceof Date||!isNaN(f)||(u+='record["'+r.field+'"].localeCompare("'+r.value+'")>=0')),r.condition=="7"&&(f=e[r.field],f instanceof Date&&(u+='(record["'+r.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+r.value+'", "'+r.format+'").getTime())<0'),f instanceof Date||isNaN(f)||(u+='(parseFloat(record["'+r.field+'"]) - parseFloat("'+r.value+'"))<0'),f instanceof Date||!isNaN(f)||(u+='record["'+r.field+'"].localeCompare("'+r.value+'")<0')),r.condition=="8"&&(f=e[r.field],f instanceof Date&&(u+='(record["'+r.field+'"].getTime()-$.fn.DtGrid.tools.toDate("'+r.value+'", "'+r.format+'").getTime())<=0'),f instanceof Date||isNaN(f)||(u+='(parseFloat(record["'+r.field+'"]) - parseFloat("'+r.value+'"))<=0'),f instanceof Date||!isNaN(f)||(u+='record["'+r.field+'"].localeCompare("'+r.value+'")<=0')),r.condition=="9"&&(u+='!record["'+r.field+'"]'),r.condition=="10"&&(u+='record["'+r.field+'"]'),u+=r.rightParentheses,r.logic=="0"&&(u+="&&"),r.logic=="1"&&(u+="||");try{eval(u)&&o.push(e)}catch(c){return n.fn.DtGrid.tools.toast(n.fn.DtGrid.lang[dtGridReflectionObj.option.lang].advanceQuery.condition.errors.conditionError,"error",3e3),t}}else o.push(e);return i.advanceQuerySorts&&i.advanceQuerySorts.length>0&&(o=o.sort(function(n,t){for(var e=0;e<i.advanceQuerySorts.length;e++){var f=i.advanceQuerySorts[e],r=n[f.field],u=t[f.field];if(r&&u){if(r==u)continue;if(!isNaN(r)&&!isNaN(u)){if(f.logic=="0")return r-u;if(f.logic=="1")return u-r}if(r instanceof Date&&u instanceof Date){if(f.logic=="0")return r.getTime()-u.getTime();if(f.logic=="1")return u.getTime()-r.getTime()}if(f.logic=="0")return r.localeCompare(u);if(f.logic=="1")return u.localeCompare(r)}}return 0})),o},sequenceCondition:0,insertConditionTr:function(){var t=this,i="",r,u;for(i+='<tr id="tr_'+t.option.id+"_"+t.sequenceCondition+'">',i+='\t<td id="seqTd_'+t.option.id+"_"+t.sequenceCondition+'"><\/td>',i+="\t<td>",i+='\t\t<button type="button" id="moveUpConditionTr_'+t.option.id+"_"+t.sequenceCondition+'" class="btn btn-primary btn-xs" title="'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.upTitle+'">'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.up+"<\/button>",i+='\t\t<button type="button" id="moveDownConditionTr_'+t.option.id+"_"+t.sequenceCondition+'" class="btn btn-primary btn-xs" title="'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.downTitle+'">'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.down+"<\/button>",i+='\t\t<button type="button" id="deleteConditionTr_'+t.option.id+"_"+t.sequenceCondition+'" class="btn btn-danger btn-xs" title="'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons.deleteTitle+'">'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.condition.table.buttons["delete"]+"<\/button>",i+="\t<\/td>",i+="\t<td>",i+='\t\t<input type="text" id="leftParentheses_'+t.option.id+"_"+t.sequenceCondition+'" name="leftParentheses_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control" />',i+="\t<\/td>",i+="\t<td>",i+='\t\t<select id="field_'+t.option.id+"_"+t.sequenceCondition+'" name="field_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control">',i+='\t\t\t<option value=""><\/option>',r=0;r<t.option.columns.length;r++)u=t.option.columns[r],u.advanceQuery!=!1&&(i+='\t<option value="'+u.id+'">'+u.title+"<\/option>");i+="\t\t<\/select>";i+='\t\t<input type="hidden" id="format_'+t.option.id+"_"+t.sequenceCondition+'" name="format_'+t.option.id+"_"+t.sequenceCondition+'" />';i+="\t<\/td>";i+="\t<td>";i+='\t\t<select id="condition_'+t.option.id+"_"+t.sequenceCondition+'" name="condition_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control">';i+='\t\t\t<option value=""><\/option>';i+='\t\t\t<option value="0">=<\/option>';i+='\t\t\t<option value="1">!=<\/option>';i+='\t\t\t<option value="2">like<\/option>';i+='\t\t\t<option value="3">start with<\/option>';i+='\t\t\t<option value="4">end with<\/option>';i+='\t\t\t<option value="5">&gt;<\/option>';i+='\t\t\t<option value="6">&gt;=<\/option>';i+='\t\t\t<option value="7">&lt;<\/option>';i+='\t\t\t<option value="8">&lt;=<\/option>';i+='\t\t\t<option value="9">is null<\/option>';i+='\t\t\t<option value="10">is not null<\/option>';i+="\t\t<\/select>";i+="\t<\/td>";i+='\t<td id="valueTd_'+t.option.id+"_"+t.sequenceCondition+'"><\/td>';i+="\t<td>";i+='\t\t<input type="text" id="rightParentheses_'+t.option.id+"_"+t.sequenceCondition+'" name="rightParentheses_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control" />';i+="\t<\/td>";i+="\t<td>";i+='\t\t<select id="logic_'+t.option.id+"_"+t.sequenceCondition+'" name="logic_'+t.option.id+"_"+t.sequenceCondition+'" class="form-control">';i+='\t\t\t<option value=""><\/option>';i+='\t\t\t<option value="0">and<\/option>';i+='\t\t\t<option value="1">or<\/option>';i+="\t\t<\/select>";i+="\t<\/td>";i+="<\/tr>";n("#conditionTable_"+t.option.id).append(i);n("#moveUpConditionTr_"+t.option.id+"_"+t.sequenceCondition).click(function(){var n=this.id.split("_")[2];t.moveUpConditionTr(n)});n("#moveDownConditionTr_"+t.option.id+"_"+t.sequenceCondition).click(function(){var n=this.id.split("_")[2];t.moveDownConditionTr(n)});n("#deleteConditionTr_"+t.option.id+"_"+t.sequenceCondition).click(function(){var n=this.id.split("_")[2];t.deleteConditionTr(n)});n("#leftParentheses_"+t.option.id+"_"+t.sequenceCondition).keyup(function(){var n=this.id.split("_")[2];t.validLeftParentheses(n)});n("#field_"+t.option.id+"_"+t.sequenceCondition).change(function(){var n=this.id.split("_")[2];t.fieldChange(n)});n("#condition_"+t.option.id+"_"+t.sequenceCondition).change(function(){var n=this.id.split("_")[2];t.conditionChange(n)});n("#rightParentheses_"+t.option.id+"_"+t.sequenceCondition).keyup(function(){var n=this.id.split("_")[2];t.validRightParentheses(n)});t.sequenceCondition++;t.resetConditionSeq()},clearConditionTr:function(){var t=this;n("#conditionTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").remove()},resetConditionSeq:function(){var t=this,i=1;n("#conditionTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").each(function(){var r=this.id.split("_")[2];n("#conditionTable_"+t.option.id+" #seqTd_"+t.option.id+"_"+r).html(i);i++})},moveUpConditionTr:function(t){var i=this;n("#conditionTable_"+i.option.id+" #tr_"+i.option.id+"_"+t).prev("#conditionTable_"+i.option.id+" tr[id*=tr_"+i.option.id+"_]").before(n("#conditionTable_"+i.option.id+" #tr_"+i.option.id+"_"+t));i.resetConditionSeq()},moveDownConditionTr:function(t){var i=this;n("#conditionTable_"+i.option.id+" #tr_"+i.option.id+"_"+t).next("#conditionTable_"+i.option.id+" tr[id*=tr_"+i.option.id+"_]").after(n("#conditionTable_"+i.option.id+" #tr_"+i.option.id+"_"+t));i.resetConditionSeq()},deleteConditionTr:function(t){var i=this;n("#conditionTable_"+i.option.id+" #tr_"+i.option.id+"_"+t).remove();i.resetConditionSeq()},validLeftParentheses:function(t){var r=this,i=n("#leftParentheses_"+r.option.id+"_"+t).val();i.match(/^[\(]*$/g)||(i=n.fn.DtGrid.tools.replaceAll(i,"\uff08","("),i=i.replace(/[^\(]/g,""),n("#leftParentheses_"+r.option.id+"_"+t).val(i))},fieldChange:function(t){var i=this,o=n("#field_"+i.option.id+"_"+t).val(),s=n("#condition_"+i.option.id+"_"+t).val(),u,f,e,r;if(o==""||s=="9"||s=="10"){n("#valueTd_"+i.option.id+"_"+t).html("");return}for(u={},f=0;f<i.option.columns.length;f++)if(i.option.columns[f].id==o&&i.option.columns[f].advanceQuery!=!1){u=i.option.columns[f];break}if(u.type=="date"){r="";r+='<div class="input-group">';r+='\t<input id="value_'+i.option.id+"_"+t+'" name="value_'+i.option.id+"_"+t+'" class="form-control" onclick="WdatePicker({dateFmt:\''+n.fn.DtGrid.tools.replaceAll(u.format,"h","H")+"'})\" />";r+='\t<div class="input-group-addon"><i class="fa fa-calendar"><\/i><\/div>';r+="<\/div>";n("#valueTd_"+i.option.id+"_"+t).html(r);n("#format_"+i.option.id+"_"+t).val(u.format);return}if(u.codeTable){r="";r+='<select id="value_'+i.option.id+"_"+t+'" name="value_'+i.option.id+"_"+t+'" class="form-control">';r+='\t<option value=""><\/option>';for(e in u.codeTable)r+='<option value="'+e+'">'+u.codeTable[e]+"<\/option>";r+="<\/select>";n("#valueTd_"+i.option.id+"_"+t).html(r);return}r='<input id="value_'+i.option.id+"_"+t+'" name="value_'+i.option.id+"_"+t+'" class="form-control" />';n("#valueTd_"+i.option.id+"_"+t).html(r)},conditionChange:function(t){var i=this,r=n("#condition_"+i.option.id+"_"+t).val(),u;r=="9"||r=="10"?n("#valueTd_"+i.option.id+"_"+t).html(""):(u=n("#valueTd_"+i.option.id+"_"+t).html(),u==""&&i.fieldChange(t))},validRightParentheses:function(t){var r=this,i=n("#rightParentheses_"+r.option.id+"_"+t).val();i.match(/^[\(]*$/g)||(i=n.fn.DtGrid.tools.replaceAll(i,"\uff09",")"),i=i.replace(/[^\)]/g,""),n("#rightParentheses_"+r.option.id+"_"+t).val(i))},sequenceSort:0,insertSortTr:function(){var t=this,i="",r,u;for(i+='<tr id="tr_'+t.option.id+"_"+t.sequenceSort+'">',i+='\t<td id="seqTd_'+t.option.id+"_"+t.sequenceSort+'"><\/td>',i+="\t<td>",i+='\t\t<button type="button" id="moveUpSortTr_'+t.option.id+"_"+t.sequenceSort+'" class="btn btn-primary btn-xs" title="'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.upTitle+'">'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.up+"<\/button>",i+='\t\t<button type="button" id="moveDownSortTr_'+t.option.id+"_"+t.sequenceSort+'" class="btn btn-primary btn-xs" title="'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.downTitle+'">'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.down+"<\/button>",i+='\t\t<button type="button" id="deleteSortTr_'+t.option.id+"_"+t.sequenceSort+'" class="btn btn-danger btn-xs" title="'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons.deleteTitle+'">'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.table.buttons["delete"]+"<\/button>",i+="\t<\/td>",i+="\t<td>",i+='\t\t<select id="sortField_'+t.option.id+"_"+t.sequenceSort+'" name="sortField_'+t.option.id+"_"+t.sequenceSort+'" class="form-control">',i+='\t\t\t<option value=""><\/option>',r=0;r<t.option.columns.length;r++)u=t.option.columns[r],u.advanceQuery!=!1&&(i+='\t<option value="'+u.id+'">'+u.title+"<\/option>");i+="\t\t<\/select>";i+="\t<\/td>";i+="\t<td>";i+='\t\t<select id="sortLogic_'+t.option.id+"_"+t.sequenceSort+'" name="sortLogic_'+t.option.id+"_"+t.sequenceSort+'" class="form-control">';i+='\t\t\t<option value=""><\/option>';i+='\t\t\t<option value="0">'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.logic.asc+"<\/option>";i+='\t\t\t<option value="1">'+n.fn.DtGrid.lang[t.option.lang].advanceQuery.sort.logic.desc+"<\/option>";i+="\t\t<\/select>";i+="\t<\/td>";i+="<\/tr>";n("#sortTable_"+t.option.id).append(i);n("#moveUpSortTr_"+t.option.id+"_"+t.sequenceSort).click(function(){var n=this.id.split("_")[2];t.moveUpSortTr(n)});n("#moveDownSortTr_"+t.option.id+"_"+t.sequenceSort).click(function(){var n=this.id.split("_")[2];t.moveDownSortTr(n)});n("#deleteSortTr_"+t.option.id+"_"+t.sequenceSort).click(function(){var n=this.id.split("_")[2];t.deleteSortTr(n)});t.sequenceSort++;t.resetSortSeq()},clearSortTr:function(){var t=this;n("#sortTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").remove()},resetSortSeq:function(){var t=this,i=1;n("#sortTable_"+t.option.id+" tr[id*=tr_"+t.option.id+"_]").each(function(){var r=this.id.split("_")[2];n("#sortTable_"+t.option.id+" #seqTd_"+t.option.id+"_"+r).html(i);i++})},moveUpSortTr:function(t){var i=this;n("#sortTable_"+i.option.id+" #tr_"+i.option.id+"_"+t).prev("#sortTable_"+i.option.id+" tr[id*=tr_"+i.option.id+"_]").before(n("#sortTable_"+i.option.id+" #tr_"+i.option.id+"_"+t));i.resetSortSeq()},moveDownSortTr:function(t){var i=this;n("#sortTable_"+i.option.id+" #tr_"+i.option.id+"_"+t).next("#sortTable_"+i.option.id+" tr[id*=tr_"+i.option.id+"_]").after(n("#sortTable_"+i.option.id+" #tr_"+i.option.id+"_"+t));i.resetSortSeq()},deleteSortTr:function(t){var i=this;n("#sortTable_"+i.option.id+" #tr_"+i.option.id+"_"+t).remove();i.resetSortSeq()},print:function(){var t=this,i,r,f,u;if(t.init.printWindowIsInit){n("#dtGridPrint_"+t.option.id+"Modal").modal("show");return}for(i="",i+=n.fn.DtGrid.tools.getWindowStart("dtGridPrint_"+t.option.id,n.fn.DtGrid.lang[t.option.lang].print.title),i+='\t\t\t\t<table class="table table-bordered table-print">',i+="\t\t\t\t\t<thead>",i+="\t\t\t\t\t\t<tr>",i+='\t\t\t\t\t\t\t<th><input type="checkbox" id="dt_grid_print_check_'+t.option.id+'" checked="checked" /><\/th>',i+="\t\t\t\t\t\t\t<th>"+n.fn.DtGrid.lang[t.option.lang].print.table.column+"<\/th>",i+="\t\t\t\t\t\t\t<th>"+n.fn.DtGrid.lang[t.option.lang].print.table.operation+"<\/th>",i+="\t\t\t\t\t\t<\/tr>",i+="\t\t\t\t\t<\/thead>",i+="\t\t\t\t\t<tbody>",r=0;r<t.option.columns.length;r++)(f=t.option.columns[r],f.print!=!1)&&(i+='\t\t\t\t\t<tr id="dt_grid_print_tr_'+t.option.id+"_"+r+'">',i+='\t\t\t\t\t\t<td><input type="checkbox" id="dt_grid_print_check_'+t.option.id+"_"+r+'" checked="checked" value="'+r+'" /><\/td>',i+="\t\t\t\t\t\t<td>"+f.title+"<\/td>",i+="\t\t\t\t\t\t<td>",i+='\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-xs" dataId="'+r+'" id="dt_grid_print_up_'+t.option.id+"_"+r+'" title="'+n.fn.DtGrid.lang[t.option.lang].print.table.buttons.upTitle+'">'+n.fn.DtGrid.lang[t.option.lang].print.table.buttons.up+"<\/button>",i+='\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-xs" dataId="'+r+'" id="dt_grid_print_down_'+t.option.id+"_"+r+'" title="'+n.fn.DtGrid.lang[t.option.lang].print.table.buttons.downTitle+'">'+n.fn.DtGrid.lang[t.option.lang].print.table.buttons.down+"<\/button>",i+="\t\t\t\t\t\t<\/td>",i+="\t\t\t\t\t<\/tr>");i+="\t\t\t\t\t<\/tbody>";i+="\t\t\t\t<\/table>";u="";u+='<button type="button" class="btn btn-primary" id="dt_grid_print_execute_'+t.option.id+'">';u+="\t"+n.fn.DtGrid.lang[t.option.lang].print.buttons.print;u+="<\/button>";i+=n.fn.DtGrid.tools.getWindowEnd(n.fn.DtGrid.lang[t.option.lang].buttons.close,u);n("body").append(i);n("#dt_grid_print_check_"+t.option.id).click(function(){n("input[id*=dt_grid_print_check_"+t.option.id+"_]").attr("checked",this.checked)});n("button[id*=dt_grid_print_up_"+t.option.id+"_]").click(function(){var r=n(this).attr("dataId"),i=t.option.id;n("#dt_grid_print_tr_"+i+"_"+r).prev("#dtGridPrint_"+i+"Modal tr[id*=dt_grid_print_tr_"+i+"]").before(n("#dt_grid_print_tr_"+i+"_"+r))});n("button[id*=dt_grid_print_down_"+t.option.id+"_]").click(function(){var r=n(this).attr("dataId"),i=t.option.id;n("#dt_grid_print_tr_"+i+"_"+r).next("#dtGridPrint_"+i+"Modal tr[id*=dt_grid_print_tr_"+i+"]").after(n("#dt_grid_print_tr_"+i+"_"+r))});n("#dt_grid_print_execute_"+t.option.id).click(function(){var i="",r,u;if(i+='<table class="dt-grid '+t.option.tableClass+'" id="dt_grid_print_'+t.option.id+'" style="'+t.option.tableStyle+'">',t.option.showHeader!=!1&&(i+="<thead>",i+="\t<tr>",n("input[id*=dt_grid_print_check_"+t.option.id+"_]:checked").each(function(){var n=this.value;i+='<th class="'+t.option.columns[n].headerClass+'" style="'+t.option.columns[n].headerStyle+'">'+t.option.columns[n].title+"<\/th>"}),i+="\t<\/tr>",i+="<\/thead>"),i+="\t<tbody>",t.exhibitDatas!=null)for(r=0;r<t.exhibitDatas.length;r++)i+="\t<tr>",n("input[id*=dt_grid_print_check_"+t.option.id+"_]:checked").each(function(){var n=this.value;i+='\t<td class="'+t.option.columns[n].columnClass+'" style="'+t.option.columns[n].columnStyle+'">';i+=t.option.columns[n].resolution?t.option.columns[n].resolution(t.exhibitDatas[r][t.option.columns[n].id],t.exhibitDatas[r],t.option.columns[n],t,r,n):t.formatContent(t.option.columns[n],t.exhibitDatas[r][t.option.columns[n].id]);i+="\t<\/td>"}),i+="\t<\/tr>";i+="\t<\/tbody>";i+="<\/table>";u=n("body").scrollTop();n("body").hide();n("html").append(i);window.print();n("#dt_grid_print_"+t.option.id).remove();n("body").show();n("#dtGridPrint_"+t.option.id+"Modal").modal("hide");n("body").scrollTop(u)});n("#dtGridPrint_"+t.option.id+"Modal").modal("show");t.init.printWindowIsInit=!0},exportFile:function(t){var i=this,r,u,e,f;if(i.init.exportWindowIsInit[t]){n("#dtGridExport_"+t+"_"+i.option.id+"Modal").modal("show");return}for(r="",r+=n.fn.DtGrid.tools.getWindowStart("dtGridExport_"+t+"_"+i.option.id,n.fn.DtGrid.lang[i.option.lang]["export"][t].title),r+='\t\t\t\t<div class="form-export modal-body form-horizontal form-export">',r+='\t\t\t\t\t<div class="form-group">',r+='\t\t\t\t\t\t<label class="col-sm-3 control-label">'+n.fn.DtGrid.lang[i.option.lang]["export"][t].exportType.title+"<\/label>",r+='\t\t\t\t\t\t<div class="col-sm-9">',r+='\t\t\t\t\t\t\t<div class="checkbox">',r+='\t\t\t\t\t\t\t\t<label><input type="radio" name="dt_grid_export_export_all_data_'+t+"_"+i.option.id+'" value="0" checked="checked" /> '+n.fn.DtGrid.lang[i.option.lang]["export"][t].exportType.now+"<\/label>",r+='\t\t\t\t\t\t\t\t<label><input type="radio" name="dt_grid_export_export_all_data_'+t+"_"+i.option.id+'" value="1" /> '+n.fn.DtGrid.lang[i.option.lang]["export"][t].exportType.all+"<\/label>",r+="\t\t\t\t\t\t\t<\/div>",r+="\t\t\t\t\t\t<\/div>",r+="\t\t\t\t\t<\/div>",r+="\t\t\t\t<\/div>",r+='\t\t\t\t<table class="table table-bordered table-export">',r+="\t\t\t\t\t<thead>",r+="\t\t\t\t\t\t<tr>",r+='\t\t\t\t\t\t\t<th><input type="checkbox" id="dt_grid_export_check_'+t+"_"+i.option.id+'" checked="checked" /><\/th>',r+="\t\t\t\t\t\t\t<th>"+n.fn.DtGrid.lang[i.option.lang]["export"][t].table.column+"<\/th>",r+="\t\t\t\t\t\t\t<th>"+n.fn.DtGrid.lang[i.option.lang]["export"][t].table.operation+"<\/th>",r+="\t\t\t\t\t\t<\/tr>",r+="\t\t\t\t\t<\/thead>",r+="\t\t\t\t\t<tbody>",u=0;u<i.option.columns.length;u++)(e=i.option.columns[u],e["export"]!=!1)&&(r+='\t\t\t\t\t<tr id="dt_grid_export_tr_'+t+"_"+i.option.id+"_"+u+'">',r+='\t\t\t\t\t\t<td><input type="checkbox" id="dt_grid_export_check_'+t+"_"+i.option.id+"_"+u+'" checked="checked" value="'+u+'" /><\/td>',r+="\t\t\t\t\t\t<td>"+e.title+"<\/td>",r+="\t\t\t\t\t\t<td>",r+='\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-xs" dataId="'+u+'" id="dt_grid_export_up_'+t+"_"+i.option.id+"_"+u+'" title="'+n.fn.DtGrid.lang[i.option.lang]["export"][t].table.buttons.upTitle+'">'+n.fn.DtGrid.lang[i.option.lang]["export"][t].table.buttons.up+"<\/button>",r+='\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-xs" dataId="'+u+'" id="dt_grid_export_down_'+t+"_"+i.option.id+"_"+u+'" title="'+n.fn.DtGrid.lang[i.option.lang]["export"][t].table.buttons.downTitle+'">'+n.fn.DtGrid.lang[i.option.lang]["export"][t].table.buttons.down+"<\/button>",r+="\t\t\t\t\t\t<\/td>",r+="\t\t\t\t\t<\/tr>");r+="\t\t\t\t\t<\/tbody>";r+="\t\t\t\t<\/table>";f="";f+='<button type="button" class="btn btn-primary" id="dt_grid_export_execute_'+t+"_"+i.option.id+'">';f+="\t"+n.fn.DtGrid.lang[i.option.lang]["export"][t].buttons["export"];f+="<\/button>";r+=n.fn.DtGrid.tools.getWindowEnd(n.fn.DtGrid.lang[i.option.lang].buttons.close,f);n("body").append(r);n("#dt_grid_export_check_"+t+"_"+i.option.id).click(function(){n("input[id*=dt_grid_export_check_"+t+"_"+i.option.id+"_]").attr("checked",this.checked)});n("button[id*=dt_grid_export_up_"+t+"_"+i.option.id+"_]").click(function(){var u=n(this).attr("dataId"),r=i.option.id;n("#dt_grid_export_tr_"+t+"_"+r+"_"+u).prev("#dtGridExport_"+t+"_"+r+"Modal tr[id*=dt_grid_export_tr_"+t+"_"+r+"]").before(n("#dt_grid_export_tr_"+t+"_"+r+"_"+u))});n("button[id*=dt_grid_export_down_"+t+"_"+i.option.id+"_]").click(function(){var u=n(this).attr("dataId"),r=i.option.id;n("#dt_grid_export_tr_"+t+"_"+r+"_"+u).next("#dtGridExport_"+t+"_"+r+"Modal tr[id*=dt_grid_export_tr_"+t+"_"+r+"]").after(n("#dt_grid_export_tr_"+t+"_"+r+"_"+u))});n("#dt_grid_export_execute_"+t+"_"+i.option.id).click(function(){var f,c,u,r,l,o,s,a,h,y,v,e;for(n("#dt_grid_export_form_container_"+t+"_"+i.option.id).remove(),f=document.createElement("div"),f.id="dt_grid_export_form_container_"+t+"_"+i.option.id,f.className="hidden",c=document.createElement("iframe"),c.name="dt_grid_export_iframe_"+t+"_"+i.option.id,f.appendChild(c),u=document.createElement("form"),u.id="dt_grid_export_form_"+t+"_"+i.option.id,u.method="post",u.target="dt_grid_export_iframe_"+t+"_"+i.option.id,u.action=i.option.ajaxLoad==!1||i.option.loadAll==!0?i.option.exportURL:i.option.loadURL,r={},r.pageSize=i.pager.pageSize,r.startRecord=i.pager.startRecord,r.nowPage=i.pager.nowPage,r.recordCount=i.pager.recordCount,r.pageCount=i.pager.pageCount,r.isExport=!0,r.exportFileName=i.option.exportFileName,r.exportType=t,r.exportAllData=n("input[name*=dt_grid_export_export_all_data_"+t+"_"+i.option.id+"]:checked").val()=="1"?!0:!1,r.parameters={},r.fastQueryParameters={},r.advanceQueryConditions=[],r.advanceQuerySorts=[],i.parameters&&(r.parameters=i.parameters),i.fastQueryParameters&&(r.fastQueryParameters=i.fastQueryParameters),i.advanceQuery&&i.advanceQuery.advanceQueryConditions&&(r.advanceQueryConditions=i.advanceQuery.advanceQueryConditions),i.advanceQuery&&i.advanceQuery.advanceQuerySorts&&(r.advanceQuerySorts=i.advanceQuery.advanceQuerySorts),l=[],n("input[id*=dt_grid_export_check_"+t+"_"+i.option.id+"_]:checked").each(function(){l.push(i.option.columns[this.value])}),r.exportColumns=l,o=[],s=!1,r.exportAllData?(i.option.ajaxLoad==!1||i.option.loadAll==!0)&&(o=i.originalDatas,s=!0):(o=i.exhibitDatas,s=!0),r.exportDataIsProcessed=s,a=[],h=0;h<o.length;h++)y=o[h],v={},n("input[id*=dt_grid_export_check_"+t+"_"+i.option.id+"_]:checked").each(function(){var n=i.option.columns[this.value],t=i.formatContent(n,y[n.id]);v[n.id]=t}),a.push(v);r.exportDatas=a;e=document.createElement("input");e.type="hidden";e.id="dtGridPager";e.name="dtGridPager";e.value=JSON.stringify(r);u.appendChild(e);f.appendChild(u);n("body").append(f);n("#dt_grid_export_form_"+t+"_"+i.option.id).submit();n("#dtGridExport_"+t+"_"+i.option.id+"Modal").modal("hide")});i.init.exportWindowIsInit[t]=!0;n("#dtGridExport_"+t+"_"+i.option.id+"Modal").modal("show")},getCheckedRecords:function(){dtGridReflectionObj=this;var t=[];return n("input[id*=dt_grid_"+dtGridReflectionObj.option.id+"_check_]:checked").each(function(){t.push(dtGridReflectionObj.exhibitDatas[this.value])}),t},reload:function(n){var t=this;n?(t.pager.nowPage=1,t.load()):(t.constructGrid(),t.constructGridPageBar())},refresh:function(n){var t=this;t.reload(n)}}},tools:{guid:function(){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},getWindowStart:function(n,t){var i="";return i+='<div class="modal fade" id="'+n+'Modal" tabindex="-1" role="dialog" aria-labelledby="'+n+'ModalLabel" aria-hidden="true">',i+='\t<div class="modal-dialog">',i+='\t\t<div class="modal-content">',i+='\t\t\t<div class="modal-header">',i+='\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;<\/button>',i+='\t\t\t\t<h4 class="modal-title" id="'+n+'ModalLabel">'+t+"<\/h4>",i+"\t\t\t<\/div>"},getWindowEnd:function(n,t){var i="";return i+='\t\t\t<div class="modal-footer">',i+='\t\t\t\t<button type="button" class="btn btn-default" data-dismiss="modal">',i+="\t\t\t\t\t"+n,i+="\t\t\t\t<\/button>",i+="\t\t\t\t"+t,i+="\t\t\t<\/div>",i+="\t\t<\/div>",i+="\t<\/div>",i+"<\/div>"},toastZIndex:1090,toastThread:null,toastFadeInAnimateTime:500,toastFadeOutAnimateTime:500,openToast:function(t,i,r){var u,f,e;i=i?i:"info";r=r?r:3e3;u="";i=="info"&&(u="text-primary");i=="warning"&&(u="text-warning");i=="error"&&(u="text-danger");i=="success"&&(u="text-success");clearTimeout(n.fn.DtGrid.tools.toastThread);n(".toast").remove();f='<div class="toast '+u+'" style="z-index:'+n.fn.DtGrid.tools.toastZIndex+'">'+t+"<\/div>";n("body").append(f);e=n(window).width()/2-n(".toast").width()/2-20;n(".toast").css("left",e);n(".toast").fadeIn(n.fn.DtGrid.tools.toastFadeInAnimateTime,function(){r&&(n.fn.DtGrid.tools.toastThread=setTimeout(n.fn.DtGrid.tools.removeToast,r))})},removeToast:function(){n(".toast").fadeOut(n.fn.DtGrid.tools.toastFadeOutAnimateTime,function(){n(".toast").remove()})},toast:function(t,i,r){n.fn.DtGrid.tools.openToast(t,i,r)},toDate:function(n,t){var r;t&&t!=null||(t="yyyy-MM-dd hh:mm:ss");var u={"y+":"y","M+":"M","d+":"d","h+":"h","m+":"m","s+":"s"},i={y:"",M:"",d:"",h:"00",m:"00",s:"00"},f=t;for(r in u)new RegExp("("+r+")").test(t)&&(i[u[r]]=n.substring(f.indexOf(RegExp.$1),f.indexOf(RegExp.$1)+RegExp.$1.length));return new Date(i.y,i.M-1,i.d,i.h,i.m,i.s)},dateFormat:function(n,t){var i,r;if(n=="")return"";n.time&&(n=new Date(n.time));i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(r in i)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length==1?i[r]:("00"+i[r]).substr((""+i[r]).length)));return t},replaceAll:function(n,t,i){return n.replace(new RegExp(t,"gm"),i)},startsWith:function(n,t){return t==undefined?!1:n.indexOf(t)==0?!0:!1},endsWith:function(n,t){return t==undefined?!1:n.lastIndexOf(t)==n.length-t.length?!0:!1},equalsIgnoreCase:function(n,t){return new String(n.toLowerCase())==new String(t).toLowerCase()},numberFormat:function(t,i){var v="false",s=Number(t).toString(),e,r,c,o,a,y,h,f,p,w;if(s.indexOf("-")==0&&(v="true",s=s.replace("-",""),t=-t),n.trim(s)=="")return"";if(/\./g.test(i)?(c=i.split(".")[0],o=i.split(".")[1]):(c=i,o=null),/\./g.test(s)?o!=null?(a=Math.round(parseFloat("0."+s.split(".")[1])*Math.pow(10,o.length))/Math.pow(10,o.length),e=(Math.floor(t)+Math.floor(a)).toString(),r=/\./g.test(a.toString())?a.toString().split(".")[1]:"0"):(e=Math.round(t).toString(),r="0"):(e=s,r="0"),c!=null){var u="",f=c.match(/0*$/)[0].length,l=null;/,/g.test(c)&&(l=c.match(/,[^,]*/)[0].length-1);y=new RegExp("(\\d{"+l+"})","g");e.length<f?(u=new Array(f+1).join("0")+e,u=u.substr(u.length-f,f)):u=e;u=u.substr(0,u.length%l)+u.substring(u.length%l).replace(y,(l!=null?",":"")+"$1");u=u.replace(/^,/,"");e=u}return o!=null?(h="",f=o.match(/^0*/)[0].length,r.length<f?(h=r+new Array(f+1).join("0"),p=h.substring(0,f),w=h.substring(f,o.length),h=p+w.replace(/0*$/,"")):h=r==0&&f==0?"":r.substring(0,o.length),r=h):(i!=""||i==""&&r=="0")&&(r=""),v=="true"?"-"+e+(r==""?"":"."+r):e+(r==""?"":"."+r)}}}})(jQuery),function(n){n.fn.DtGrid.defaultOptions={grid:{lang:"en",ajaxLoad:!0,loadAll:!1,loadURL:"",datas:null,check:!1,exportFileName:"datas",tableStyle:"",tableClass:"table table-bordered table-hover table-responsive",showHeader:!0,gridContainer:"dtGridContainer",toolbarContainer:"dtGridToolBarContainer",tools:"refresh|faseQuery|advanceQuery|export[excel,csv,pdf,txt]|print",exportFileName:"datas",exportURL:"/dtgrid/export",pageSize:20,pageSizeLimit:[20,50,100]},column:{id:"field",title:"field",type:"string",format:null,otype:null,oformat:null,columnStyle:"",columnClass:"",headerStyle:"",headerClass:"",hide:!1,hideType:"",extra:!0,codeTable:null,fastQuery:!1,fastQueryType:"",advanceQuery:!0,"export":!0,print:!0,resolution:null}}}(jQuery)